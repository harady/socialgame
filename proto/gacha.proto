syntax = "proto3";

package gacha;

// Gacha information
message Gacha {
  int32 id = 1;
  string name = 2;
  string description = 3;
  string start_date = 4;
  string end_date = 5;
}

// Item information
message Item {
  int32 id = 1;
  string name = 2;
  string rarity = 3;
  string description = 4;
}

// Gacha item information
message GachaItem {
  int32 gacha_id = 1;
  int32 item_id = 2;
  float probability = 3;
}

// Request for getting the list of Gachas
message GetGachaListRequest {
}

// Response with the list of Gachas
message GetGachaListResponse {
  repeated Gacha gachas = 1;
}

// Request for getting the details of a specific Gacha
message GetGachaDetailsRequest {
  int32 gacha_id = 1;
}


// Response with the details of a specific Gacha
message GetGachaDetailsResponse {
  Gacha gacha = 1;
  repeated GachaItem items = 2;
}


// Request for executing a Gacha
message ExecuteGachaRequest {
  int32 gacha_id = 1;
}

// Response with the item generated from executing the Gacha
message ExecuteGachaResponse {
  Item item = 1;
}

service GachaService {
  // Get the list of Gachas
  rpc GetGachaList(GetGachaListRequest) returns (GetGachaListResponse);
  // Get the details of a Gacha
  rpc GetGachaDetails(GetGachaDetailsRequest) returns (GetGachaDetailsResponse);
  // Execute a specific Gacha
  rpc ExecuteGacha(ExecuteGachaRequest) returns (ExecuteGachaResponse);
}
