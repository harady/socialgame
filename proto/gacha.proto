syntax = "proto3";


package gacha;

// ç”°æ°¦ç”±åœ¨æ¥è®¾
message Gacha {
  int32 id = 1;
  string name = 2;
  string description = 3;
  string start_date = 4;
  string end_date = 5;
}

// æ¥å‰ã€åœ¨å‰æ–¹æ³•æœˆ
message Item {
  int32 id = 1;
  string name = 2;
  string rarity = 3;
  string description = 4;
}

// æNš²‡å‰§å•æ¥å‰æ³•æœˆ
message GachaItem {
  int32 gacha_id = 1;
  int32 item_id = 2;
  float probability = 3;
}

// è‡´æ˜æ˜€æ’‘èº«å¼€åœ¨æˆæ–°å†…ä½œåŠ›é€šè¯·åœ¨çš„åˆ™äº«åœå’¦æ”¾

message GetGachaListRequest {
}

message GetGachaListResponse {
  repeated Gacha gachas = 1;
}

message GetGachaDetailsRequest {
  int32 gacha_id = 1;
}

message GetGachaDetailsResponse {
  Gacha gacha = 1;
  repeated GachaItem items = 2;
}

message ExecuteGachaRequest {
  int32 gacha_id = 1;
}

message ExecuteGachaResponse {
  Item item = 1;
}

service GachaService {
  // Gacha\u0f0d9a\0f0d Protocol
  rpc GetGachaList (GetGachaListRequest) returns (GetGachaListResponse);
  // Gacha\u0f0d9a\0f0d Protocol
  rpc GetGachaDetails (GetGachaDetailsRequest) returns (GetGachaDetailsResponse);
  // Gacha\u0f0d9a\0f0d Protocol
  rpc ExecuteGacha (ExecuteGachaRequest) returns (ExecuteGachaResponse);
}